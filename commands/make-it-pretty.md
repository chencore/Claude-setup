---
allowed-tools: Read, Write, Edit, Glob, Grep, Bash, TodoWrite
description: 提高代码可读性和格式化，同时保留精确的功能
argument-hint: [file-path] - 可选美化的文件
---

# 使代码更美观

我将提高代码可读性，同时保留精确的功能。

## 战略性思考过程

在进行任何更改之前，我需要考虑：

1. **代码分析**
   - 是什么让这段代码"丑陋"或难以阅读？
   - 是否有需要简化的复杂嵌套结构？
   - 命名是否不清楚或不一致？
   - 是否有可以抽象的重复模式？

2. **安全考虑**
   - 哪些更改纯粹是 cosmetic（安全的）？
   - 哪些可能会影响行为（有风险的）？
   - 是否对当前结构有隐式依赖？
   - 重命名是否会破坏外部引用？

3. **改进策略**
   - 优先级 1：清晰的命名（变量、函数、文件）
   - 优先级 2：降低复杂性（提取函数、简化逻辑）
   - 优先级 3：消除冗余（DRY 原则）
   - 优先级 4：提高类型安全性（如适用）

4. **验证方法**
   - 如何确保功能保持完全相同？
   - 有哪些测试可以验证行为？
   - 是否应该添加临时日志来验证流程？

基于此分析，我将安全地进行：

**安全第一：**
- 更改前创建 git 检查点
- 使用 **Write** 工具创建备份
- 系统性地跟踪所有修改

我将根据以下标准识别要美化的文件：
- 您指定的文件，或者如果未指定，分析整个应用程序
- 最近修改的代码
- 我们的对话上下文

**我将进行的改进：**
- 变量和函数命名以提高清晰度
- 代码组织和结构
- 删除未使用的代码和杂乱内容
- 简化复杂表达式
- 分组相关功能
- 修复松散或通用的类型声明
- 在支持的地方添加缺失的类型注释
- 根据使用情况使类型更具体

**我的方法：**
1. 分析当前代码模式和类型使用
2. 应用一致的命名约定
3. 在适用的地方提高类型安全性
4. 重新组织以提高可读性
5. 不改变逻辑地消除冗余

**质量保证：**
- 所有功能保持完全相同
- 测试继续通过（如果可用）
- 不会发生行为更改
- 为更改提供清晰的提交消息

**重要**：我绝不会：
- 添加"Co-authored-by"或任何 Claude 签名
- 包含"使用 Claude Code 生成"或类似消息
- 修改 git 配置或用户凭据
- 向提交添加任何 AI/助手归属

这有助于将工作代码转换为可维护的代码，没有风险。